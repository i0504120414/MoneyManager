בס"ד
תכנון אפליקציה של ניהול כספים אישיים


מה יש כבר

1. יש שני אקשן בגיטהב - 
    1. שרושם חשבון בדטה בייס 
    2. שעושה סקרייפ לנתונים מכניס לדטה בייס
2. יש דטה בייס בסופהבייס


מה צריך לעשות

1. לבנות אפליקציה בReact Native
2. האפליקציה צריכה להתחבר לדטה בייס בסופה בייס
3. האפליקציה צריכה לאפשר למשתמש לראות את הנתונים שלו
4. הנתונים צריכים להיות מסודרים כך:
    1. מצב עכשווי בבנקים 
    2. ביותר קטן גם המצב העכשווי בכרטיסי אשראי
    3. גרף של זמן שמציג את המצב שהולך להיות בכל יום חודש קדימה 
       שיהיה בנוי על מצב האשראי והבנה שלל דברים שהולכים לרדת על פי היסטוריה
    4. האפליקציה תתן למשתמש להגדיר יעדים לפי קטגוריה
    5. האפליקציה תצטרך לנהל קטגוריות אבל זה במסך אחר הניהול יתבצע כך:
        1. קטוגריות שהוצעו על ידי אתר הבנק או האשראי אוטמטי
        2. קטגוריות שהמשתמש יוצר בעצמו
        3. המשתמש יכול להגדיר שקטגוריה אוטמטית מסוימת תשתנה בקביעות לקטוגירה משלו
        4. אותו הדבר גם לפי שם העסק
        5. רישומים שאין להם קטגוריה אוטמטית יכנסו לרשימה שתוצג למשתמש עם התראה למלאות אותם
    6. האפליקציה גם תיצור רשימה של בתי עסק מול קטגוריה וגם זה ישמר בדטה בייס
    7. האפליקציה תחשב הוצאות קבועות כך:
        1. ידני על ידי המשתמש
        2. על פי הרישום במידע של אתר האשראי או הבנק כמו הוראת קבע או תשלומים
        3. אוטומטי על ידי זיהוי הוצאות חוזרות
        4. יש שני סוגים של הוצאות קבועות:
            1. הוצאה קבועה רגילה - כל חודש אותו סכום
            2. הוצאה קבועה משתנה - כל חודש סכום שונה אבל באותו תאריך
            3. ההוצאות הקבועות יבדקו בכל תנועה חדשה האם היא שייכת להוצאה קבועה ויעדכנו את המידע בהתאם
            4. במקרה של שינוי פתאומי ברמת ההוצאה או שהוצאה לא הופיעה תנתן התראה על כך
    8. אפשר להוסיף תנועות ידניות של הוצאות והכנסות למשל מזומנים
    9. אפשר להגדיר התראות למשתמש:
        1. התראה על הוצאה גדולה מהרגיל בקטגוריה מסוימת
        2. התראה על הוצאה גדולה מהרגיל בעסק מסוים
        3. התראה על הגעה ליעד חיסכון
        4. התראה על הוצאה ללא קטגוריה למילוי
        5. התראה על הוצאה ללא בית עסק למילוי

## תכנון טכני ליישום (Technical Implementation Guide)

### 1. הרחבת מסד הנתונים (Supabase SQL)
כדי לתמוך בדרישות, נוסיף את הטבלאות הבאות (ראה קובץ `schema_extensions.sql`):
*   **Categories (קטגוריות):** ניהול קטגוריות (שם, סוג, אייקון, האם מערכת/פרטי).
*   **CategoryRules (זיהוי אוטומטי):** מיפוי מילות מפתח/שמות בתי עסק לקטגוריות.
*   **Budgets (תקציבים/יעדים):** הגדרת יעד חודשי לקטגוריה.
*   **RecurringExpenses (הוצאות קבועות):** מעקב אחרי הוראות קבע/צפי חיובים.
*   **עדכון Transactions:** הוספת שדות `category_id`, `is_manual`.

### 2. אפליקציית React Native (Expo)
מבנה הפרויקט בתיקייה `mobile-app`:
*   **Tech Stack:** React Native (Expo), Supabase JS Client, React Navigation, Victory Native (לגרפים).
*   **Screens (מסכים):**
    *   `HomeScreen`: תמונת מצב (יתרה בבנק + אשראי צפוי), גרף תחזית חודשית.
    *   `TransactionsScreen`: רשימת תנועות עם סינון, חיפוש ועריכת קטגוריה.
    *   `BudgetsScreen`: הגדרת יעדים ומעקב (Progress Bars).
    *   `SettingsScreen`: הגדרות כלליות וקטגוריות.

### 3. תהליכים אוטומטיים
*   **קטלוג:** בעת טעינת האפליקציה או בענן, הרצת פונקציית `categorizeTransaction` שמשווה תיאורים לחוקים.
