מסמך אפיון טכני: מערכת MoneyManager1. חזון המערכתמערכת לניהול פיננסי אישי המבצעת אוטומציה מלאה של משיכת נתונים מחשבונות בנק וכרטיסי אשראי בישראל, עיבוד הנתונים, זיהוי הוצאות קבועות והצגתם בדשבורד חכם המאפשר תחזית קדימה.2. ארכיטקטורה טכנולוגיתFrontend: React/Next.js המוגש כ-PWA (ניתן להתקנה כתוכנה) ומאוחסן ב-GitHub Pages.Backend & DB: Supabase (PostgreSQL, Auth, Edge Functions).Automation Engine: GitHub Actions המריץ את הספרייה israeli-bank-scrapers.Security: אחסון פרטי גישה רגישים ב-GitHub Secrets בלבד.3. מבנה מסד הנתונים (Supabase SQL)יש להקים את הטבלאות הבאות עם Row Level Security (RLS) מופעל:שם טבלהתיאורעמודות מרכזיותaccountsפרטי החשבונותid (UUID), bank_type, description, last_update, statustransactionsריכוז כל התנועותid, account_id, date, amount, description, category_id, hash (unique)categoriesהגדרת קטגוריות ויעדיםid, name, target_amountrecurringהוצאות קבועות ותשלומיםid, account_id, type (תשלומים/הו"ק), amount_avg, day_of_month, is_confirmedlogsתיעוד ריצות האקשןid, created_at, sender, details, level (INFO/ERROR)notificationsהתראות למשתמשid, title, message, is_read, created_at4. תהליכי GitHub Actions (הלוגיקה)א. תהליך רישום ואימות (register-account.yml)מקבל bank_type ופרטי התחברות מה-UI.מריץ בדיקה (Scrape) ליום אחד לוודא תקינות.במידה והצליח:שומר את החשבון ב-Supabase.יוצר/מעדכן GitHub Secret בשם ACC_{ACCOUNT_ID} המכיל JSON עם פרטי הגישה.ב. מנוע הסנכרון (daily-sync.yml)רץ כל לילה (Cron Job) או ידנית (Workflow Dispatch).שולף רשימת חשבונות מ-Supabase.עבור כל חשבון:מושך את הסוד מה-Secrets.מריץ סקרייפינג לפי טווח (Update / Max).מבצע Deduplication (מניעת כפילויות) באמצעות Hash ייחודי לכל עסקה.מעדכן את טבלת ה-Transactions.5. לוגיקת זיהוי קבועים (Recurring Logic)המערכת צריכה לזהות 3 סוגי קבועים:תשלומים (Installments): שליפת מידע מה-Metadata של הסקרייפר (למשל: תשלום 3 מתוך 12).הוראות קבע (Direct Debit): זיהוי לפי תיאור העסקה (למשל "הוראת קבע", "העברה קבועה").זיהוי אלגוריתמי: זיהוי עסקה שחוזרת על עצמה באותו שם וסכום דומה במשך 3 חודשים רצופים.כל זיהוי נכנס לטבלת recurring בסטטוס pending עד לאישור המשתמש.6. ממשק משתמש (UI/UX)מסך כניסה (Auth)מבוסס Supabase Auth (מייל וסיסמה).מגן על כל הנתיבים באפליקציה.דשבורד ראשימצב בנקים: מלבנים עם יתרה נוכחית לכל חשבון.Timeline Chart: ציר X עם תאריכים (חודש קדימה). ציר Y מסמל יתרה. הדיאגרמה מציגה את מצב העו"ש החזוי לפי ההכנסות וההוצאות הקבועות הידועות.ניהול תקציב: טבלה ללא קווים המציגה ניצול קטגוריה (Actual vs Target).מסך ניהול נתוניםטבלת עסקאות עם אפשרות לסינון וחיפוש.אפשרות לשינוי קטגוריה לקבוצת עסקאות (Bulk Edit).ניהול "חוקי שיוך": הגדרה שבית עסק X תמיד שייך לקטגוריה Y.7. הנחיות אבטחהאין לשמור סיסמאות ב-Database. רק ב-GitHub Secrets.Row Level Security (RLS): יש לוודא שמשתמש א' לא יכול לראות נתונים של משתמש ב' דרך ה-API של Supabase.API Keys: שימוש ב-Service Role Key רק בתוך ה-GitHub Action.הנחיה ל-AI Agent:"בצע את הפרויקט בשלבים. התחל בהקמת מבנה הנתונים ב-Supabase, לאחר מכן בנה את ה-Scraper ב-GitHub Actions תוך שימוש בספריית israeli-bank-scrapers, ולבסוף בנה את ממשק ה-React PWA לפי האפיון לעיל."